### Зачем нужен фреймворк?
Создавая автотесты под реальный продукт, вы столкнетесь с тем, что базовые методы Selenium WebDriver покрывают далеко не все потребности для тестирования web-интерфейсов. WebDriver представляет собой простой и удобный инструмент для взаимодействия с сайтами в браузерах. На его базе уже можно строить более сложные инструменты-фреймворки.  В предыдущих уроках этого модуля мы познакомились с паттерном проектирования UI-тестов Page Object Model. Основная задача подхода Page Object -- уменьшить дублирование кода. 

Какие еще трудности возникают при написании автотестов на Selenium? 

Например, мы уже пробовали реализовать метод is_element_present, с помощью которого можно проверить наличие элемента без получения исключения NoSuchElementException. Хотелось бы иметь возможность также легко проверить видимость элемента на странице или более того, всегда по умолчанию находить только видимые элементы. Для развертывания прогона автотестов в системах непрерывной интеграции таких как Jenkins, TeamCity, Travis CI удобно иметь настройку генерации скриншотов в момент падения теста. 

Можно реализовывать данные методы самостоятельно, так как это даст вам бесценный опыт программирования и глубокое понимание внутреннего устройства Selenium, PyTest и других инструментов. Однако, в небольших компаниях на разработку и поддержку дополнительного инструментария обычно нет лишних ресурсов. К счастью, вы можете воспользоваться бесплатными библиотеками и фреймворками, которые помогут решить вам эти задачи и не изобретать собственный велосипед.

Мы не можем рекомендовать какой-то конкретный фреймворк, так как каждый из них имеет свои сильные и слабые стороны, и конечный выбор должен оставаться за вами с учетом потребностей тестируемого продукта. Мы описали в этом уроке несколько основных фреймворков для Python и Selenium. Советуем сделать небольшой тестовый проект на каждом из них, используя официальную документацию, и после этого решать, какой инструмент внедрить. Так как все рассматриваемые фреймворки и библиотеки являются проектами с открытым исходным кодом, вы также можете самостоятельно реализовывать нужные методы, взяв за образец уже готовый код из данных проектов. 

#### Краткое описание фреймворков
- [Splinter][111] — довольно мощная надстройка над Selenium WebDriver, имеет множество дополнительных методов. Для работы совместно с PyTest существует специальный плагин [pytest-splinter][222], включающий собственные фикстуры.
- [Selene][333] — реализация для Python идей популярного Java-фреймворка Selenide.
- [PyPOM][444] — библиотека для реализации Page Object Model от разработчиков из проекта Mozilla. Поддерживает работу со Splinter https://github.com/mozilla/PyPOM
- [Webium][555] — легковесная реализация Page Object Model от разработчиков и тестировщиков Wargaming.net

[111]:https://splinter.readthedocs.io/en/latest/index.html
[222]:https://github.com/pytest-dev/pytest-splinter
[333]:https://github.com/yashaka/selene
[444]:https://pypom.readthedocs.io/en/latest/
[555]:https://github.com/wgnet/webium

Если вы знаете другие библиотеки и фреймворки, которые заслуживают упоминания в данном контексте, пожалуйста, напишите о них в комментариях.




##Splinter
Документация: https://splinter.readthedocs.io/en/latest/index.html

Код: https://github.com/cobrateam/splinter

Код и документация pytest-splinter: https://github.com/pytest-dev/pytest-splinter

**Преимущества**:

- Популярный проект: 143 звезды на GitHub.
- Достаточно актуальный проект, issues на GitHub оперативно закрываются.
- Есть возможность поиска элемента с заданным текстом.
- Есть методы работы, эмулирующие работу мышки, например, right_click, double_click и даже drag_and_drop.
- Простые проверки на видимость элемента, а также на наличие классов.
- Встроенные проверки на наличие текста и наличие элементов, которые удобно использовать в assert.

**Недостатки**:

- Из популярных браузеров поддерживаются только Chrome и Firefox.
- Примеры кода обновляются редко, некоторые примеры не работают и их приходится дорабатывать, чтобы запустить.
- Splinter довольно серьезная надстройка над Selenium WebDriver, что потенциально может приводить к проблемам совместимости и необходимости ожидать поддержки изменений, внедряемых в Selenium.
- Библиотеку для Page Object нужно устанавливать отдельно.

Если вы установите pytest-splinter, то получите возможность использовать дополнительные фикстуры:

- Использование двух сессий браузера в тесте одновременно, например, для настройки окружения через админскую часть сайта.
- Возможность задавать паузу после каждой команды WebDriver для дебага или презентации работы тестов.
- Задание директории по умолчанию для скачивания файлов, что является проблемой в обычном Selenium, который не умеет работать с нативным диалогом сохранения файлов в ОС.
- Возможность автоматического создания скриншотов в случае падения тестов.

**Вывод**:

Возможно, самая актуальная и мощная библиотека для Selenium и Python на данный момент.





## Selene
Мощный фреймворк, дополняющий возможности Selenium WebDriver. Также включает в себя реализацию Page Object.

Документация: https://selene-docs-test.readthedocs.io/en/latest/introduction.html

Код: https://github.com/yashaka/selene

Презентация: https://www.youtube.com/watch?v=BzfOeHJrguQ

**Преимущества:**

- Популярный проект: 280 звезд на GitHub.
- Реализованы практически все необходимые фичи для использования в реальном проекте.
- Включает себя реализацию Page Object.

**Недостатки:**

- В репозитории проекта давно нет активности.
- Синтаксис фреймворка похож на Java-код, что может выглядеть непривычно для разработчиков на Python.
- Довольно серьезная надстройка над Selenium WebDriver, что несет риски в будущей совместимости с Selenium.

**Вывод:**

Если вам нравится, как выглядит код и способ написания ассертов в Selene, то можете попробовать использовать его в своих проектах.





## PyPOM
Библиотека для реализации паттерна Page Object.

Документация: https://pypom.readthedocs.io/en/latest/

Код: https://github.com/mozilla/PyPOM

**Преимущества:**

- Популярный проект: 85 звезд на GitHub.
- Активный проект с регулярными коммитами. Разрабатывается под крылом известной компании -- есть надежда на долгосрочную поддержку библиотеки.
- Поддерживает рассмотренный выше фреймворк Splinter, но может использоваться и независимо от него.
- Позволяет задавать для страницы url по умолчанию, а также передавать параметры ссылки при инициализации страницы.
- Возможность задавать произвольное условие окончательной загрузки страницы.
- Хранение локаторов в виде атрибутов. Ленивая инициализация элементов.
- Возможность описать и переиспользовать часть интерфейса пользователя, которая применяется на нескольких страницах, например, футер.

**Недостатки:**

- Нет возможности легко проверять в assert наличие элементов, если не установлен Splinter

**Итог:**

Можно использовать, если нет времени писать свою реализацию Page Object.





##Webium
Еще одна библиотека для реализации паттерна Page Object.

Документация: http://wgnet.github.io/webium/

Код: https://github.com/wgnet/webium

Презентация: https://www.youtube.com/watch?v=XrL1BLgkKyA

**Преимущества:**

- Популярный проект: 129 звезд на GitHub.
- Минимум синтаксических отличий от Selenium WebDriver — можно легко внедрить и заменить на другую библиотеку в случае необходимости. 
- Позволяет задавать для страницы url по умолчанию, а также передавать параметры ссылки при инициализации страницы.
- Хранение локаторов в виде атрибутов. Ленивая инициализация элементов.
- Возможность описать и переиспользовать часть интерфейса пользователя, которая применяется на нескольких страницах, например, футер.
- Есть метод is_element_present, позволяющий проверять наличие элемента без выбрасывания исключения NoSuchElementException. Возвращает True или False.

**Недостатки:**

- В репозитории проекта давно нет активности.

**Итого:**

Код проекта можно использовать в качестве примера для написания собственного Page Object фреймворка из-за его простоты. Саму библиотеку лучше не использовать в собственном проекте, так как репозиторий Webium выглядит заброшенным.